%*****************************************
\chapter{Literature Review}\label{ch:litreview}
%*****************************************
%todo: find relevant and insightful papers on the topic. FIN

%Hybrid heat pump can also refer to a dual energy input heat up. Find way to exclude this from search term. On google scholar, -"blahblah" can be used. Not sure if the same is true on OneSearch. 

% Very vert briefly explain how heat transfer work w.r.t. heating/cooling houses. Briefly explain heat pumps, some equations. Explain what a bivalent heat pump system is, will not be too commonly known. 
% Introduce relevant papers. What did they find, what did they do.

\section{Heat Pumps} \label{sec:heatpumps}
\acp{HP} work by harnessing the energy from low temperature sources such as air, water or the ground. \HPs of any kind acquire energy from its surrounding environment in the form of low-temperature heat and \textit{concentrate} it to heat comparatively minute volumes to its surroundings. This is achieved through a vapour compression cycle, explained in \cref{subsec:vapourcompcycle}. Under ideal conditions, \acp{AWHP} have extremely high \acp{COP} in the \num{3.5} to \num{4.5} range. This is of course from their ability to harvest the aerothermal energy from the outside air. The main downfall of \acp{AWHP} is that when the external air temperature is low, their \ac{COP} is reduced significantly. Due to this inherent disadvantage, \acp{HP} are essentially unfit be the sole space heating generator for almost all applications, depending on climates and design points. While \HPs have the capacity to perform heating and cooling, this thesis and associated simulations do not consider the cooling of a building or home, and therefore is only concerned with heating and considers only the heating-season timeframe of the year. The space-heating radiators found in existing homes are not suitable for cooling \cite{klein_numerical_2014}, the cold water in the radiators does not cool the room effectively and condensation on the radiator surface may become and issue. 

Because the efficiency of \acp{HP} is so dependent on the outside air temperature, the measure of \ac{SPF} is typically used to characterise them when considering the performance over a certain heating period. The \ac{SPF} represents the ratio of the total useful energy produced by the \ac{HP} during a heating season, to the seasonal electricity consumption. For example, an \ac{SPF} of 3 would mean that over a given year, the \ac{HP} produced 3 units of heating energy for every unit of electrical energy provided. Due to \acp{HP} extracting renewable energy from the surrounding air, the \ac{SPF} is (or should be) always higher than 1, and generally is above 3. EU legislation states that in order to be eligible for the \ac{RHI}, a \acp{HP} \ac{SPF} must be above 2.5 \cite{eu-114-2014}. \cite{klein_numerical_2014} investigated the efficiency gains from the implementation of a \ac{HHS} in a retrofitted house built in the 1970s. They compared this to other monovalent heating systems. A medium sized heat pump was used. 

\acp{HP} come in many different heat capacities, from single kilo-watt units to extremely large units which can heat large multi storey office buildings. In residential home contexts, the largest \acp{HP} generally available are almost \SI{300}{\kilo\watt}. If an \ac{ASHP} were to be sized so large as to have the capacity to provide the entire heating envelope of a residential home during even the coldest expected temperatures, the \ac{ASHP} would (aside from being prohibitively expensive), be so oversized that when temperatures are moderate, the \ac{HP} would produce so much heat as to heat the space so quickly that it would have an extremely short on-off cycle \cite{bee_air-source_2019}. Since the peak load for heating occurs for a very small number of hours during any given heating period, this would be very detrimental to the unit, specifically the condenser component. The frequent on-off cycling significantly reduces the longevity of the condenser, and would require replacement long before what would be expected. Many manufacturers suggest that the number of on-off cycles should not exceed 6 per hour. %FIND SOURCE
To avoid this issue, \acp{AWHP} are specifically undersized. Various ``design temperatures'' can be calculated for a given location. For Dublin, the design temperature which covers 99.0\% of the annual heating is \SI{-0.7}{\celsius}. \acp{AWHP} are usually sized to meet a design temperature of 60\%--70\%, as opposed to more traditional space heaters, as is further explained in \cref{sec:hddanddesign}.

\acp{HP} tend to perform better when providing space heating through underfloor heating. This is partly due to underfloor heating being more efficient in general than other, more traditional space heating methods, namely hot-water radiators. Another reason more applicable to \acp{HP} is that the (space heating) inlet water temperature for underfloor heating is much lower than radiators. This means the \ac{HP} does not have to heat the circulating water as hot as it would with radiators. The temperature delta between water temperature inlet to the \ac{HP} and the outlet is simply lower and therefore less energy has to be produced by the \ac{HP} in the first place. However, retrofitting houses with underfloor heating is expensive and very intrusive to the building --- as obviously (all) floors much be ripped up and coils must be placed and plumbed --- which discourages many homeowners from performing this type of retrofit.

\subsection{Vapour-Compression Cycle}\label{subsec:vapourcompcycle}


\subsection{Hybrid Heating Systems}
A bivalent, hybrid \HP heating system consists of a \HP of some description and an auxiliary or supplemental heating source \cite{blackman_study_2019}. The \HP type this thesis focuses on is a \AWHP, and the auxiliary heating source is a conventional condensing gas boiler. The overarching idea behind this dual heating source system for a home is: the (undersized) \HP can provide heating to the home using electricity, rather than gas, as its energy input during milder periods of the heating season with minimal usage of the gas boiler, and during the more severe, colder periods of the season, the gas boiler can provide the majority of the heat required to keep the home at a comfortable temperature. \AWHP performance is very weather dependent, as explained in \cref{sec:heatpumps}, and during very cold, humid spells simply cannot provide enough heating capacity to maintain a comfortable temperature inside, unless it is wholly oversized, which has problems associated with it, described \cref{sec:heatpumps}. Therefore, almost all of the literature agrees that an undersized \HP with a ``correctly'' sized gas boiler is the most efficient system \cite{park_performance_2014,bagarella_annual_2016,dongellini_influence_2021,rauschkolb_cost-optimal_2020}. \cref{fig:hhsawhpboilerdiagram} shows a schematic diagram of a \ac{HHS} comprising of an \AWHP, gas boiler, buffer tank, radiators, sensors, and controller. The blue line represents the ``cold'' water, which has just expelled its heat to the indoor rooms and is circulating back to the \HP and gas boiler to be heated up again. This return water is typically in the range of \qtyrange{25}{30}{\celsius} by the time it reaches the heating devices. The heating devices heat the water up a temperature in the range of \qtyrange{45}{40}{\celsius}, where makes its way back to radiators to once again expel its stored heat to the indoor rooms, which for a comfortable temperature, are in the neighbourhood of \qtyrange{18}{22}{\celsius}.

The controller of this system determines how much heat is being added to the circulating water by the two heating devices, the sum and also the share. During milder days, it is understandable that a lower quantity of heat is required to maintain the home at a comfortable temperature, while during colder days, more heating input is required. The \AWHP can only run at full tilt, however, ideally, the controller can control the circulating water flowrate in such a way as \textit{step down} the heat output of the \AWHP/gas boiler to create the ideal heat flux from the radiators into the air of the rooms to maintain a nice indoor temperature. The controller

\begin{figure}[htb]
    \centering
    \includegraphics[width=0.6\linewidth]{hhsawhpboiler}
    \caption{\acs{HHS} with an \acs{AWHP} and condensing gas boiler \cite{dongellini_influence_2021}}
    \label{fig:hhsawhpboilerdiagram}
\end{figure}

TODO: Explicitly define what a hybrid heating system is Ã  la Klein and Huchtemann mentioning bivalency, set-point temp, T_biv, show plot, etc. 



\subsection{Buffer Tank} 
A buffer tank is a medium- to large-sized water vessel used in hydronic heating systems. It provides a large thermal inertia to the heating system-house system, which many small- to medium-sized houses, especially those with poor insulation, lack. Thermal inertia is a desired property of a building as rapid thermal fluctuations in ambient air are less of a concern when it comes to maintaining a comfortable thermal environment indoors. This effect is noticeable in large office/district buildings with high thermal inertias and plays a significant role in heating-capacity selection \cite{owen_ashrae_2009}. Furthermore, a buffer tank provides a ``hydraulic switch'' and allows for heat generation and heat distribution to be in separate loops. This opens up the option to have differing flowrates between the heat generation and heat distribution loops. 

Buffer tanks have been found, when sized correctly and with an appropriate control strategy, to have a positive influence on the efficiency and performance on \acp{HHS} \cite{klein_numerical_2014,roccatello_analysis_2022}. The controller is able to make use of the \HPs ``most profitable working conditions'' thanks to the presence of the buffer \cite{dettorre_economic_2018}. It has been found that when a buffer thank is present in the \HP circuit, \ac{SPF} increases as the size of the \HP decreases \cite{mugnini_variable-load_2021}. \citeauthor{mugnini_variable-load_2021} confirmed this for all sizes of \HPs simulated, the smallest buffer tank having a capacity of \SI{200}{\liter}. 

The larger a buffer tank in volume, the larger its energy storage capacity. However, with a larger volume, and naturally larger cylinder and surface area, comes greater heat loss, which seem to correlate almost linearly \cite{klein_numerical_2014}. This could be justified if other performance factors such as \ac{SPF} or load factor were positively affected to offset this loss in heat, however this does not seem to be the case according to \cite{roccatello_analysis_2022} and \citeauthor{klein_numerical_2014}, which also found only a moderate reduction in on-off cycles with smaller tanks. This is partly to do with the thermal inertia of the building and return temperature controller. 
\citeauthor{klein_numerical_2014} found that the volume of the buffer tank had very limited effect on the system performance. \citeauthor{dongellini_influence_2021} sized their buffer tank just large enough such that the maximum number of on-off cycles was never greater than six per hour,  resulting in a buffer tank with a volume of \SI{79}{\litre}.  This maximum on-off cycle figure was chosen based off their \HP manufacturer guidelines. Daiken suggest %FIND SUGGESTED MAX NUMBER OF ON-OFF CYCLES FROM DAIKIN. 
\cite{dettorre_economic_2018}

\subsection{Frosting and Defrosting}
Frosting occurs in \acp{ASHP} in colder ambient temperatures resulting in issues for \HPs. Frost build up depends on the ambient temperature, temperature of the surface in question and relative humidity. For heat pumps, a few ranges of temperatures at which frosting occurs has been found in the literature \cite{sandstrom_frosting_2021} finding a range of \qtyrange{-15}{6}{\celsius} at a r.h. of $\approx$90, while \cite{kropas_experimental_2021} found frost formation to begin when the ambient air temperature was below \SI{3.5}{\celsius} with a r.h. of 88\%. Frosting specifically occurs when the surface temperature of the fins on the air-side heat exchanger component (evaporator) are lower than the dew point of the of the air. Water droplets start to form and collect on the fins. When the temperatures is below freezing or close to it, the water droplets freeze to the fins and build up a frosting. Frost, unlike snow, which both form from the freezing of water droplets, is not loose and must be scraped off or melted off. It will not \textit{fall off of} a surface like snow might. This layer of frost acts as a layer of insulation and restricts the heat exchanger from transferring heat from the ambient air. Since these fins are typically closely packed, if the layering of frost continues and progressively builds up, the airflow around the fins decreases and so does convective heat transfer to the ambient air, further exacerbating the issue of insulation. All of this is to say that when frosting occurs in \acp{ASHP}, their performance declines severely. \cite{zhang_experimental_2018} found that the temperature of the air and surface of the fins, humidity, velocity of air are the main factors involved in frost formation. 

Many treatments for frosting have been proposed and implemented into products. There is however no golden bullet solution, all of their advantages and disadvantages. Three main solutions are typically used when addressing the issue of frosting in \acp{ASHP}. 
\begin{itemize}
    \item Simple on-off defrosting: the \HP is simply switched off when too much frost has formed on the outdoor component. The performance has been degraded to such a point that it is now economically advantageous to turn off the \HP and wait for the frost to melt away. This however, takes a long time and can negatively affect the thermal comfort of a home if no other heat production is used. The \HP does not use any power during this off-cycle of course, retaining the \ac{COP} of the \HP --- although, this may affect the overall system performance if a gas boiler needs to be used to provide the entire heating load of the home.
    \item Reverse cycle defrosting: this method is similar to the first method; the refrigerant is cycled in reverse and hot gas is forced into the heat exchanger. Recall that \HPs and refrigerators differ only in objective. The \HP now treats the outdoors as the ``cold'' sink and begins transferring heat from indoors to outdoors. Intuitively, one can see that this is quite detrimental to the performance of the \HP as the house is being actively cooled in order to heat up the outdoor coils and fins to melt away the frost, and one cannot forget water's high thermal capacity... The intention in this method is to melt the frost much quicker than the first method, allowing the \ASHP to being warming the home once again much earlier than the the simple on-off defrosting method.
    \item Resistive heating: electric resistive heaters are installed on/in the heat exchanger. This method works very well, quickly melting off frost and is a separate heating element to the \HP and therefore does not interrupt the \HPs cycles. Resistive heaters are very expensive to run and negatively affect the \ac{COP} of the \HP.
\end{itemize}

\cite{amer_review_2017} found that the reverse cycling method resulted in a higher \ac{COP} than the other two methods. 

\section{Heating Degree Days and Design Temperatures} \label{sec:hddanddesign}
\acp{HDD} is a measure of the difference between the outside temperature and the inside temperature. \acp{HDD} are usually considered over a period of time, be it a month, heating season or entire year. A \textit{base} temperature is chosen, typically around \qtyrange{12}{21}{\celsius} which then determines when it is ``cold'' outside, or can be thought of as being the temperature above which heating is no longer considered to require heating. This base temperature can be chosen at will, and simply depends on what the person/institution deems to be \textit{warm enough}. This measure can be used to quantitatively compare the heating demand of a given house in different locations/climates. The heating requirement of a specific building are directly proportional to the \ac{HDD} \cite{chartered_institution_of_building_services_engineers_environmental_2006}.

To calculate  the \ac{HDD} for a certain day, three equations are used and are displayed from \cref{eq:hdd}. Which equation to use is determined by the interaction between the base temperature and the maximum temperature recorded during that day.  

\begin{align}\label{eq:hdd}
    \text{Degree days} = \begin{cases}
        t_\text{base} - \frac12(t_\text{max} + t_\text{min}), & \text{if } t_\text{max} < t_\text{base}\\
        \frac12(t_\text{base} - t_\text{min}) -\frac14(t_\text{max} -t_\text{base} ), & \text{if } t_\text{base} > \frac12(t_\text{max} + t_\text{min}) \\
        \frac14(t_\text{base} -t_\text{min} ), & \text{if } t_\text{base} <\frac12(t_\text{max} + t_\text{min})
     \end{cases}  
\end{align}

To calculate the Monthly degree days however, only \cref{eq:hdd1} is made use of. This total is found by summing the daily temperatures differences and can be seen in \cref{eq:mdd}.
\begin{equation}
    \text{Monthly degree days} = \displaystyle\sum_\text{month} \left[t_\text{base} - \frac12(t_\text{max} + t_\text{min})\right] \label{eq:mdd}
\end{equation}

\citetitle{chartered_institution_of_building_services_engineers_environmental_2006} has chosen a base temperature of \SI{15.5}{\celsius}. \citetitle{owen_ashrae_2009} used a base temperature of \SI{18.3}{\celsius} and determined an annual \ac{HDD} of \SI{3135}{\celsius\day} for Dublin Airport, IE, N\ang{53;26;} W\ang{06;15;}. Using the online tool \texttt{Degree Days.Net} \cite{degreedays} with a base temperature of \SI{15.5}{\celsius}, a \ac{HDD} figure of \SI{2072.3}{\celsius\day} was obtained for the same location.  

Design temperatures are a measure how many hours/days a specified condition is exceeded. In the case of a heating design temperature, this would indicate how many days of the year or heating season are spent below a given temperature. \citetitle{owen_ashrae_2009} notes that this measure does not give an indication of the frequency or duration of these events, only a cumulative result is returned. According to \citetitle{owen_ashrae_2009}, the 99.6\% design temperature in Dublin Airport is \SI{-1.9}{\celsius} while the 99.0\% design temperature is \SI{-0.7}{\celsius}. Traditionally, conventional gas boilers or resistive heaters were sized to design temperatures, meaning, for a chosen design temperature percentile (e.g., 99.0\%), the heater could heat the building to thermally comfortable levels for 99\% of the year, however during the 1\% temperature lows, the heater would not be adequate. This calculates to the heater being undersized for $\sim$35 hours of the year. \graffito{$365\times24=\SI{8860}{\hour} \Rightarrow 99.0\%\text{-ile} = 8760(100-99.0) = 87.6$ }

In monovalent systems, the \HP is sized in such a way as to be able to provided the entire heating load for a building at design conditions. This results in the \HP being positively over-dimensioned for the task \cite{klein_numerical_2014}. 

The concept of a \textit{design-day} can be used to design heating configurations for homes, especially when performing numerical simulations on a model of the system \cite{rauschkolb_cost-optimal_2020}. A design-day file is a special weather file created with design conditions in mind. Based on the design temperature parameter, \citelist{owen_ashrae_2009}{institution} lays out a procedure to generate a 24-hour weather profile. These profiles represent the 0.4\% to 99.6\% extremes experienced for a particular location. This weather data is used in simulations to determine the minimum size for a heater required for a house (for these particular percentiles of course). \graffito{for the purposes of the simulation(s) concerning this thesis, the 0.4 percentile, and any cooling-nessecary-temperatures for that matter, are not of concern as cooling is out of scope.}

The ``heating duration curve'' can be devised for a specific climate and a specific \HP where a curve is plotted on a chart with heating load [\unit{\kilo\watt\per\hour}] against number of hours the heating load is equal to or above a selected percentage of design load. For example, as illustrated in \cref{fig:heatingloaddurationcurve}, the blue line indicates 50\% design load, and lands around 1300 hours on the $x$-axis. This means that for 1300 hours of the year/heating season, the heating load of the building is 50\% of the design (or max) load. The balance point marked by the yellow circle is the point at which the \HP is not longer able to provide the entire heating load required by the building. To the left of this point, the gas boiler will need to provide the remaining heat capacity to maintain a comfortable indoor temperature. If the \ac{AWHP} size is increased, this balance point moves to the left, as the \HP can provide the entire heating envelope of the building at lower temperatures. Of course, for the sake of the diagram, the curves and lines in this figure are arbitrary (e.g., \ac{AWHP} performance is not linear with outdoor temperature, and by proxy, heating load), but it illustrates how a \HP may be sized to 60\% of the design load of a building.

\begin{figure}[htb]
    \centering
    \import{tikz/}{heatingDurationCurve.tex}
    \caption{Heating Duration Curve}
    \label{fig:heatingloaddurationcurve}
\end{figure}

All of this is to say that there are many methods of determining and comparing the heating load of a building for a given climate, with which heating devices may be sized to in order to be able to (almost always) have the capacity to heat a building. A \ac{HHS} is unique in that it is composed of two heating devices. The boiler, as stated before, is sized to a certain high-percentage design condition. This may be defined by the user/homeowner, convention, or by some set of standards set by a governing body (e.g., ASHRAE), and is typically a value in the region of 95\% to 99.7\%. On account of this, the \ac{AWHP} can be sized smaller than compared to if it were the sole heating device.

\section{Primary Energy}\label{sec:primaryenergy}
\ac{PE} is a term used in the fields of energy statistics and energetics. Sources of \ac{PE} are those which have not been interfered with by humans, in other words, are the natural form of energy and are unprocessed. \ac{PE} sources include: oil, natural gas, sunlight, wind, etc. \ac{PE} stands in contrast to secondary energy, which can be thought of as the carrier of energy, which most commonly happens to be electricity, but can also be liquid forms of energy (e.g., diesel/petrol, ), hydrogen fuel cells or (waste) heat. Following from \ac{PE}, is \ac{PEF} which connects \ac{PE} to final energy, it is a measure of how much energy in total is required to produce a unit of \textit{usable} energy. \cref{fig:PEtoFinalSankey} is a sankey diagram which breaks down the flow of energy in Ireland in 2020 from \ac{PE} on the left by fuel type, and final energy on the left, by sector. It also highlights the energy losses associated with energy production and transmission. It requires energy to convert natural gas or oil to electricity, while energy losses corresponding to renewable energy production are dismissed, as the energy source is of course \textit{free}. 

\begin{figure}[htb]
    \centering
    \includegraphics[width=0.7\linewidth]{primaryEnergyToFinalEnergySankey}
    \caption[\acs{PE} breakdown by fuel type and sector]{Sankey diagram showing \acs{PE} by fuel type on left and final energy by sector on right \cite{seai_energy_2021}.}
    \label{fig:PEtoFinalSankey}
\end{figure}

\ac{PES} is difference between the amount of energy consumed by the original device (whatever it may be) and the amount of energy consumed by the new device. In relation to this thesis, it will be taken to be the savings of the new heat generation system compared to the old system (conventional gas boiler). Knowledge of the \ac{PEF} (or \ac{RES}) and \ac{PES} can indicate how much $\text{CO}_2$ with a new heating system, and is the foundation of the techno-ecological model of this thesis. 

\section{Electrification of Heating}
The EU has now for a number of years been pushing for the electrification of heating throughout the union. This has been identified as a clear means to achieve decarbonisation goals, as concerns over global warming become greater. As noted in \cref{sec:context}, the residential sector contributes 27\% of the final energy consumption, while residential domestic water production and space heating contributes to 80\% of that. In Ireland, residential heating accounted for 53\% of $\text{CO}_2$ emissions from heating. However, across all sectors, heating and cooling are responsible for half of all final energy consumption in the EU \cite{an2016strategy}. Therefore, it is clearly evident that decarbonisation of the heating/cooling sector is vital to a) reaching EU targets of lowering $\text{CO}_2$ emissions and b) improving air quality and the reduction of harmful emissions \cite{epri2018us}. Although, switching to electrically driven heating systems does not automatically or inherently reduce the carbon emissions, merely, it changes the source of the energy; the electricity must also be decarbonised for this to be the case. 

\citeauthor{seai_energy_2021} \cite{seai_energy_2021} carried out a comprehensive study on the Irish electrical grid performance as it relates to renewable energy sources and to heating/cooling. According to the report: the share renewable energy to that of the the total energy used in 2020 was 13.5\% (having missed the EU target of 16\%); the share of renewable energy used specifically in heating/cooling was just 6.3\%, its target having been 12\%; energy from renewable sources grew by 8.9\% over the previous year, and the total installed wind energy capacity grew by 4.1\%, from \SI{4130}{\mega\watt} to \SI{4310}{\mega\watt} (in the Republic). Overall, the residential energy $\text{CO}_2$ emission has trending downwards over the past decade and a half, falling by 25\% since 2005, and the $\text{CO}_2$ intensity of electricity generation is half of its value in 2005, standing at \SI{300}{\gram CO\textsubscript{2}\per\kilo\watt\hour}. \graffito{Emission intensity is a measure of how much $\text{CO}_2$ is released per unit of energy produced}. These are good signs for the electrification of heating, because in order for the electrification of heating to result in a decarbonising of heating, the electricity production must at least have a lower emission intensity compared to if no electrification process were to take place, but ideally have the prospects of becoming a very low/zero $\text{CO}_2$ intensity matter.

\section{Controllers and Control Theory}
Control theory is concerned with the control of dynamic systems with with a desired goal in mind, which is called the reference. A controller manipulates the inputs to a system, usually denoted $u$ in such a way as to alter the output variables or states, $y$, of the system to follow a given reference. Disturbances $d$ to a system are expected, yet unforeseen inputs to a system which may significantly alter the outputs state.  There are two main types of controller, feed-forward, and feedback controllers.

A feed-forward controller, also known as an open loop controller, controls the system without knowing the current state of the system. This is possible if disturbances are either eliminated, or wholly understood and accounted for.\graffito{However, they would they no longer qualify as disturbances, and would simply be considered as inputs, but that is by the by.} Complete knowledge of the dynamics of the system being controlled would be required and captured by a mathematical model, either by physics and first principles, or by system identification (a model is fitted to data). The dynamics of the system are inverted by the controller and fed to the system as inputs. Any error in the inversion process results in undesired system states. 

Feedback controllers, also known as closed loop controllers are a \textit{much} more common form of controller. The current system state is known to the controller, and the reference and current state information is used to determine the appropriate control inputs. In doing so, a feedback controller inherently changes the dynamics of a system. Feedback controllers usually make systems more stable, however, there is the possibility of making systems less stable and even unstable through controllers. There are many types of feedback controllers, the most common and well understood kind being a linear feedback controller called a \ac{PID} controller, or just a \ac{PID}. Linear controllers assume the general behaviours of the system to be linear. Although, even if the dynamics of system are not, in fact, linear, a \ac{PID} will still likely be able to control the system appropriately and reach the reference state.

In a hybrid heating system, controllers are used to manage the operation of the different heating technologies and ensure that they are used in the most efficient and effective way possible. The controllers in a hybrid heating system are typically responsible for a number of tasks, including monitoring the temperature inside and outside the building, determining the best heating technology to use based on the current conditions, and controlling the operation of the heating technologies to maintain a comfortable and consistent temperature.

For example, when the outside temperature is cold, the controller may determine that it is most efficient to use the gas furnace to heat the building. When the outside temperature is mild, the controller may determine that it is more efficient to use the heat pump, which uses less energy than the gas furnace. Very advanced controllers may also use predictive algorithms and weather forecasts to anticipate changes in temperature and adjust the heating system accordingly by storing a lot of heat in the buffer tank during a warm period right before a cold period \cite{demirezen_feasibility_2021}.

\subsection{\acs{PID} Controllers}
\ac{PID} controllers are a type of feedback control system that are commonly used in a wide variety of systems to maintain a desired output or setpoint. The acronym refers to the three components of the control algorithm used by the controller. \ac{PID} controllers work by continuously calculating an error value that represents the difference between the desired setpoint and the current output of the system. This error value is then used to calculate and apply a correction to the system, based on the three components of the \ac{PID} algorithm:
\begin{itemize}
    \item The proportional component applies a correction proportional to the error value. This allows the controller to quickly respond to large errors and make large corrections.
    \item The integral component applies a correction based on the accumulated error over time. This helps to eliminate steady-state errors and ensure that the system eventually reaches the desired setpoint.
    \item The derivative component applies a correction based on the rate of change of the error. This helps to dampen the system's response and prevent overshoot and oscillation.  
\end{itemize}


\ac{PID} controllers are used in a wide variety of systems, including mechanical systems like motors and actuators, temperature control systems, and chemical process control systems. They are often preferred over other control algorithms because they are relatively simple to implement and can provide stable and accurate control of the system's output.

\subsection{Noise and Error}
Noise and error are common sources of problems in control systems. Noise refers to random variations in the system's output that are not caused by the control signal, while error refers to the difference between the desired setpoint and the actual output of the system. Noise and error can have a number of adverse effects on the performance of a control system, including reduced accuracy and stability, as well as increased oscillation and overshoot. To deal with noise and error in control systems, a number of different approaches can be used. One approach is to use a filter to remove noise from the system's output signal. This can be done using a low-pass filter, which removes high-frequency noise, or a high-pass filter, which removes low-frequency noise. Another approach is to use a model-based control algorithm, which uses a mathematical model of the system to predict the system's output and apply appropriate control signals. This can help to reduce the effects of noise and error by using the model to compensate for them. Furthermore, another approach is to use a robust control algorithm, which is designed to be resistant to the effects of noise and error. Robust control algorithms typically use a combination of feedback and feed-forward control, as well as advanced control techniques like gain scheduling and optimization, to achieve robust performance in the presence of noise and error.



